{% extends 'base.html.twig' %}

{% macro displayAdminOptions(article) %}
    {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('route.admin.edit_news_article', {'article': article.id}) }}" class="btn btn-primary">
            <i class="glyphicon glyphicon-edit"></i>
            Edit
        </a>
        <a href="{{ path('route.admin.confirm_delete_news_article', {'article': article.id}) }}" class="btn btn-danger">
            <i class="glyphicon glyphicon-remove"></i>
            Delete
        </a>
    {% endif %}
{% endmacro %}

{% macro displayNotices() %}
    {% set notices = app['session'].flashbag.get('notice') %}
    {% if notices|length > 0 %}
        <div class="alert alert-success" role="alert">
            {% for notice in notices %}
                <p>{{ notice }}</p>
            {% endfor %}
        </div>
    {% endif %}
{% endmacro %}

{% import _self as macros %}

{% block title %}{{ article.title }} - News - {{ parent() }}{% endblock %}

{% block body %}

    {{ macros.displayNotices() }}

    <div class="row">
        <div class="box col-md-12">
            <h2>
                {{ article.title }}<br />
                <small>
                    {{ article.createdAt|date('g:ia \\o\\n l \\t\\h\\e jS \\o\\f F, Y') }}
                </small>
                {{ macros.displayAdminOptions(article) }}
            </h2>
            <p>
                {{ article.content }}
            </p>
            <footer>
                <small>
                    Last updated at {{ article.lastUpdated|date('g:ia \\o\\n l \\t\\h\\e jS \\o\\f F, Y') }}
                </small>
            </footer>
        </div>
    </div>
{% endblock %}